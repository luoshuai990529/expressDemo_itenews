(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4206cfad"],{"87c6":function(t,s,e){"use strict";var o=e("c8a7"),a=e.n(o);a.a},"8d91":function(t,s,e){},af00:function(t,s,e){"use strict";var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{on:{click:t.jumpDetail}},[1==t.postData.type&&t.postData.cover.length>=1&&t.postData.cover.length<3?e("div",{staticClass:"singleImg"},[e("div",{staticClass:"left"},[e("div",{staticClass:"title"},[t._v(t._s(t.postData.title))]),e("div",{staticClass:"info"},[t._v(t._s(t.postData.user.nickname)+" "+t._s(t.postData.comment_length)+"跟帖")])]),e("div",{staticClass:"right"},[e("img",{staticClass:"cover",attrs:{src:t._f("fixUrl")(t.postData.cover[0].url),alt:""}})])]):t._e(),1==t.postData.type&&t.postData.cover.length>=3?e("div",{staticClass:"multipImgs"},[e("div",{staticClass:"title"},[t._v(t._s(t.postData.title))]),e("div",{staticClass:"coverWrapper"},[e("img",{staticClass:"coverImg",attrs:{src:t._f("fixUrl")(t.postData.cover[0].url),alt:""}}),e("img",{staticClass:"coverImg",attrs:{src:t._f("fixUrl")(t.postData.cover[1].url),alt:""}}),e("img",{staticClass:"coverImg",attrs:{src:t._f("fixUrl")(t.postData.cover[2].url),alt:""}})]),e("div",{staticClass:"info"},[t._v(t._s(t.postData.user.nickname)+" "+t._s(t.postData.comment_length)+"跟帖")])]):t._e(),2==t.postData.type&&t.postData.cover.length>=1?e("div",{staticClass:"video"},[e("div",{staticClass:"title"},[t._v(t._s(t.postData.title))]),e("div",{staticClass:"coverWrapper"},[e("img",{staticClass:"coverImg",attrs:{src:t._f("fixUrl")(t.postData.cover[0].url),alt:""}}),t._m(0)]),e("div",{staticClass:"info"},[t._v(t._s(t.postData.user.nickname)+" "+t._s(t.postData.comment_length)+"跟帖")])]):t._e()])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"playIconWrapper"},[e("span",{staticClass:"iconfont icon-shiping"})])}],i={filters:{fixUrl(t){const s=/^http/;return s.test(t)?t:"http://itluoshuai.cn:3000"+t}},props:["postData"],methods:{jumpDetail(){this.$router.push({path:"/postdetail?id="+this.postData.id})}},mounted(){}},n=i,c=(e("87c6"),e("2877")),l=Object(c["a"])(n,o,a,!1,null,"3a5587a3",null);s["a"]=l.exports},bb51:function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"headerSec"},[e("div",{staticClass:"topSec"},[t._m(0),e("div",{staticClass:"secInfo"},[e("input",{staticClass:"secInput",attrs:{type:"text",name:"secinfomation"},domProps:{value:t.secInputInfo},on:{focus:t.goSecPage,blur:t.getInfo}}),e("i",{staticClass:"iconfont icon-sousuo"})]),t._m(1)]),e("div",{staticClass:"newList"},[e("div",{ref:"newsListContent",staticClass:"items"},[e("van-tabs",{model:{value:t.curIndex,callback:function(s){t.curIndex=s},expression:"curIndex"}},t._l(t.categoryList,(function(s,o){return e("van-tab",{key:o,attrs:{title:s.name,to:"/?category="+o}},[e("van-list",{attrs:{finished:t.categoryList[o].finished,"immediate-check":!1,"finished-text":"没有更多了",offset:0},on:{load:t.loadMorePost},model:{value:t.categoryList[o].loading,callback:function(s){t.$set(t.categoryList[o],"loading",s)},expression:"categoryList[index].loading"}},[e("div",t._l(t.categoryList[o].postList,(function(t,s){return e("post-temp",{key:s,attrs:{postData:t}})})),1)])],1)})),1)],1)])]),e("div",{ref:"createContent",staticClass:"newsContent"})])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"logo"},[e("i",{staticClass:"iconfont icon-new"})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"perInfo"},[e("a",{staticClass:"iconfont icon-wode1",attrs:{href:"#/perinfo"}})])}],i=e("af00"),n={data(){return{secInputInfo:"搜索最新资讯",categoryList:[],curIndex:Number(this.$route.query.category)||0}},methods:{goSecPage(){this.secInputInfo="",window.location.href="/#/secinfo"},getInfo(){this.secInputInfo="搜索最新资讯"},loadMorePost(){console.log("页面已经到底部，加载更多,将当前栏目的pageIndex+1再调用loadPage加载新的数据");let t=this.getCurCategory();t.pageIndex+=1,setTimeout(()=>{this.loadPost()},1e3)},loadPost(){console.log("2---调用loadPost函数请求新闻文章数据"),console.log("2.1------获取当前的栏目category，通过category.id可以获取当前激活栏目的id");let t=this.getCurCategory(),s=t.id;console.log("当前激活栏目的id："+s),console.log("当前栏目的当前页："+t.pageIndex),console.log("当前栏目显示的文章数："+t.pageSize),this.$axios({url:"/post",method:"get",params:{category:s,pageIndex:t.pageIndex,pageSize:t.pageSize}}).then(s=>{console.log("文章数据——————————————————————————————"),console.log(s.data),console.log("2.2---------将category中的postList数组解构，以及获取的文章数据解构到数组重新赋值给category.postList"),t.postList=[...t.postList,...s.data.data],console.log("2.3---------将category中的loading状态改为false，表示加载完毕"),t.loading=!1,console.log("2.4---------判断当前栏目的数据是否全部加载完毕"),console.log(t.postList.length),s.data.total<=t.postList.length||!s.data.total?(t.finished=!0,console.log("2.4.1---------数据已经加载完毕")):console.log("2.4.1---------可以继续加载"),console.log("loadPage 渲染完成！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！")})},loadCategory(){localStorage.getItem("categoryList")&&localStorage.getItem("delCategoryList")?(this.categoryList=this.initCategory(JSON.parse(localStorage.getItem("categoryList"))),console.log(this.categoryList),this.loadPost()):this.$axios({url:"/category",method:"get"}).then(t=>{console.log(t.data.data),localStorage.setItem("categoryList",JSON.stringify(t.data.data)),console.log("1.1------调用initCategory改造栏目数据"),this.categoryList=this.initCategory(t.data.data),this.loadPost()})},getCurCategory(){console.log("------------------------进入getCurCategory获取当前激活栏目------------------------");let t=this.curIndex,s=this.categoryList[t];return console.log("当前激活的栏目："),console.log(s),s||this.categoryList[0]},initCategory(t){console.log("1.2---------在每个栏目中添加管理自己的文章数组postList，pageIndex当前页，pageSize页面长度，加载状态");const s=t.map(t=>{let s={...t,pageIndex:1,pageSize:5,postList:[],loading:!0,finished:!1};return s});return console.log("1.3---------最后将改造后的栏目数据返回给this.categoryList"),s}},components:{PostTemp:i["a"]},watch:{curIndex:function(t){localStorage.setItem("curCategoryIndex",this.$route.query.category),console.log("-----------------执行监听器的curIndex方法--------------当前栏目的索引值是"+t);const s=this.getCurCategory();0==s.postList.length?(console.log("当前激活栏目的postlist长度为0，因此执行loadPost渲染数据"),this.loadPost()):(console.log("当前激活栏目的postList数据不为0，无需重新渲染页面"),console.log(this.categoryList[t].postList))}},mounted(){console.log("1---进入页面首先请求栏目数据"),this.loadCategory();let t=this.$refs.newsListContent.getElementsByClassName("van-tabs__content")[0],s=this.$refs.createContent;s.appendChild(t)}},c=n,l=(e("de16"),e("e516"),e("2877")),r=Object(l["a"])(c,o,a,!1,null,"68544152",null);s["default"]=r.exports},c8a7:function(t,s,e){},d0ea:function(t,s,e){},de16:function(t,s,e){"use strict";var o=e("8d91"),a=e.n(o);a.a},e516:function(t,s,e){"use strict";var o=e("d0ea"),a=e.n(o);a.a}}]);
//# sourceMappingURL=chunk-4206cfad.7f6a806a.js.map