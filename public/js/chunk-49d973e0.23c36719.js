(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49d973e0"],{"0e07":function(t,e,s){},"13ab":function(t,e,s){},"58a6":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.commentList?s("div",{staticClass:"moreComments",on:{click:function(e){e.stopPropagation(),t.showInput=!1}}},[s("div",{staticClass:"header"},[s("per-nav-temp",{attrs:{navtitle:"精彩跟帖"},on:{clickNav:function(e){return t.backHandler("返回文章详情页")}}})],1),s("div",{staticClass:"followList"},[t._l(t.commentList,(function(e,n){return s("div",{key:n},[s("comments",{attrs:{comment:e},on:{clickReply:t.discuss}})],1)})),t._m(0)],2),s("div",{staticClass:"sendComments",on:{click:function(e){e.stopPropagation(),t.showInput=!0}}},[s("div",{staticClass:"writeinp"},[t.showInput?t._e():s("div",{staticClass:"inpCon"},[s("input",{attrs:{type:"text",placeholder:"写跟帖"},on:{focus:function(e){e.stopPropagation(),t.showInput=!0}}})]),t.showInput?s("div",{staticClass:"textareaInput",class:t.showInput?"showTextArea":""},[s("textarea",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"writeCon",attrs:{name:"",id:""},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]):t._e(),s("button",{staticClass:"sendBtn",on:{click:t.sendComments}},[t._v("发送")])])])]):t._e()},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"botMsg"},[s("h4",[t._v("已经加载完毕啦")])])}],o=s("caf1"),i=s("efb3"),c={directives:{focus:{inserted:function(t){t.focus()}}},data(){return{showInput:!1,content:"",commentList:[],repParentId:""}},components:{PerNavTemp:o["a"],Comments:i["a"]},methods:{backHandler(){this.$router.back()},discuss(t){console.log("回复文章的id为"+t),this.repParentId=t,this.showInput=!0},changeInput(){this.showInput=!0},sendComments(){""!=this.content.trim()?(console.log("发送信息"),this.$axios({url:"/post_comment/"+this.$route.query.articleId,method:"post",data:{content:this.content,parent_id:this.repParentId||null}}).then(t=>{console.log(t),this.$toast.success(t.data.message),this.content="",this.loadComments()})):this.$toast("请不要输入空值")},loadComments(){this.$axios({url:"/post_comment/"+this.$route.query.articleId,method:"get"}).then(t=>{console.log(t.data.data),this.commentList=t.data.data})}},mounted(){this.loadComments()}},r=c,l=(s("91d6"),s("2877")),m=Object(l["a"])(r,n,a,!1,null,"0bd07904",null);e["default"]=m.exports},"851c":function(t,e,s){"use strict";var n=s("bc21"),a=s.n(n);a.a},"8a40":function(t,e,s){"use strict";var n=s("13ab"),a=s.n(n);a.a},"91d6":function(t,e,s){"use strict";var n=s("c5c2"),a=s.n(n);a.a},bc21:function(t,e,s){},c5c2:function(t,e,s){},caf1:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pernav"},[s("div",{staticClass:"edithead"},[s("i",{staticClass:"iconfont icon-fanhui",on:{click:t.sendClick}}),s("b",[t._v(t._s(t.navtitle))])])])},a=[],o={props:["navtitle"],data(){return{}},methods:{sendClick(){this.$emit("clickNav")}}},i=o,c=(s("8a40"),s("2877")),r=Object(c["a"])(i,n,a,!1,null,"664cd19b",null);e["a"]=r.exports},cc5b:function(t,e,s){"use strict";var n=s("0e07"),a=s.n(n);a.a},efb3:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comments"},[s("div",{staticClass:"comUser"},[s("div",{staticClass:"headImg"},[s("img",{attrs:{src:t.$axios.defaults.baseURL+t.comment.user.head_img,alt:""}})]),s("div",{staticClass:"comMsg"},[s("span",{staticClass:"nickname"},[t._v(t._s(t.comment.user.nickname))]),s("span",{staticClass:"comTime"},[t._v(t._s(t.beforTime))])]),s("div",{staticClass:"reply"},[s("a",{attrs:{href:"#","data-id":t.comment.id},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.sendReply(t.comment.id,t.comment.user.nickname)}}},[t._v("回复")])])]),t.comment.parent?s("div",{staticClass:"floor"},[s("parent",{attrs:{floorList:t.comment.parent,level:t.FloorLevel},on:{clickReply:t.sendReply}})],1):t._e(),s("div",{staticClass:"content"},[t._v(t._s(t.comment.content))])])},a=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"parentContent"},[t.floorList.parent?s("parent",{attrs:{level:t.level-1,floorList:t.floorList.parent},on:{clickReply:t.sendReply}}):t._e(),s("div",{staticClass:"comInfo"},[s("div",{staticClass:"userCom"},[s("span",{staticClass:"floor"},[t._v("第 "+t._s(t.level)+" 楼")]),s("span",{staticClass:"nickname"},[t._v(t._s(t.floorList.user.nickname))]),s("span",{staticClass:"time"},[t._v(t._s(t.beforTime))]),s("span",{staticClass:"reply"},[s("a",{attrs:{href:"#","data-id":t.floorList.id},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.sendReply(t.floorList.id,t.floorList.user.nickname)}}},[t._v("回复")])])]),s("div",{staticClass:"comments"},[t._v(t._s(t.floorList.content))])])],1)},i=[],c={name:"Parent",props:["floorList","level"],data(){return{}},mounted(){},computed:{beforTime(){let t=new Date(this.floorList.create_date).toLocaleDateString().split("/"),e=(new Date).toLocaleDateString().split("/");if(e[0]-t[0]!=0)return e[0]-t[0]+"年前";if(e[1]-t[1]!=0)return e[1]-t[1]+"月前";if(e[2]-t[2]!=0)return e[2]-t[2]+"天前";let s=new Date(this.floorList.create_date).toLocaleTimeString().split(":")[0].split("午")[1],n=(new Date).toLocaleTimeString().split(":")[0].split("午")[1],a=n-s==0?"1小时内":n-s+"小时前";return a}},methods:{sendReply(t,e){this.$emit("clickReply",t,e)}}},r=c,l=(s("851c"),s("2877")),m=Object(l["a"])(r,o,i,!1,null,"0a540199",null),u=m.exports,p={props:["comment"],data(){return{}},computed:{beforTime(){let t=new Date(this.comment.create_date).toLocaleDateString().split("/"),e=(new Date).toLocaleDateString().split("/");if(e[0]-t[0]!=0)return e[0]-t[0]+"年前";if(e[1]-t[1]!=0)return e[1]-t[1]+"月前";if(e[2]-t[2]!=0)return e[2]-t[2]+"天前";let s=new Date(this.comment.create_date).toLocaleTimeString().split(":")[0].split("午")[1],n=(new Date).toLocaleTimeString().split(":")[0].split("午")[1],a=n-s==0?"1小时内":n-s+"小时前";return a},FloorLevel(){return this.calcuFloorDeep(this.comment.parent,0)}},methods:{sendReply(t,e){this.$emit("clickReply",t,e)},calcuFloorDeep(t,e){return t?this.calcuFloorDeep(t.parent,e+1):e}},components:{Parent:u},mounted(){console.log(this.comment)}},d=p,f=(s("cc5b"),Object(l["a"])(d,n,a,!1,null,"4e0a4b62",null));e["a"]=f.exports}}]);
//# sourceMappingURL=chunk-49d973e0.23c36719.js.map