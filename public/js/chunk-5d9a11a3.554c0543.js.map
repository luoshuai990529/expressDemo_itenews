{"version":3,"sources":["webpack:///./src/components/PostTemp.vue?f5ce","webpack:///./src/components/PostTemp.vue?b2bf","webpack:///src/components/PostTemp.vue","webpack:///./src/components/PostTemp.vue?3b08","webpack:///./src/components/PostTemp.vue","webpack:///./src/views/Home.vue?bff9","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2db0","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?8826","webpack:///./src/views/Home.vue?c73f"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","jumpDetail","postData","type","cover","length","staticClass","_v","_s","title","user","nickname","comment_length","attrs","_f","url","_e","_m","staticRenderFns","filters","reg","test","props","methods","$router","push","path","id","component","domProps","secInputInfo","goSecPage","getInfo","ref","model","value","callback","$$v","curIndex","expression","_l","item","index","key","name","categoryList","finished","loadMorePost","$set","index2","Number","$route","query","category","window","location","href","console","log","getCurCategory","pageIndex","setTimeout","loadPost","categoryId","pageSize","$axios","method","params","then","res","data","postList","loading","total","localStorage","getItem","initCategory","JSON","parse","setItem","stringify","map","newArr","components","PostTemp","watch","loadCategory","itemElem","$refs","newsListContent","getElementsByClassName","currCon","createContent","appendChild"],"mappings":"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","file":"js/chunk-5d9a11a3.554c0543.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostTemp.vue?vue&type=style&index=0&id=15ad1d18&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostTemp.vue?vue&type=style&index=0&id=15ad1d18&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{on:{\"click\":_vm.jumpDetail}},[(_vm.postData.type == 1 && _vm.postData.cover.length >= 1 && _vm.postData.cover.length < 3)?_c('div',{staticClass:\"singleImg\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.postData.title))]),_c('div',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.postData.user.nickname)+\" \"+_vm._s(_vm.postData.comment_length)+\"跟帖\")])]),_c('div',{staticClass:\"right\"},[_c('img',{staticClass:\"cover\",attrs:{\"src\":_vm._f(\"fixUrl\")(_vm.postData.cover[0].url),\"alt\":\"\"}})])]):_vm._e(),(_vm.postData.type == 1 && _vm.postData.cover.length >= 3)?_c('div',{staticClass:\"multipImgs\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.postData.title))]),_c('div',{staticClass:\"coverWrapper\"},[_c('img',{staticClass:\"coverImg\",attrs:{\"src\":_vm._f(\"fixUrl\")(_vm.postData.cover[0].url),\"alt\":\"\"}}),_c('img',{staticClass:\"coverImg\",attrs:{\"src\":_vm._f(\"fixUrl\")(_vm.postData.cover[1].url),\"alt\":\"\"}}),_c('img',{staticClass:\"coverImg\",attrs:{\"src\":_vm._f(\"fixUrl\")(_vm.postData.cover[2].url),\"alt\":\"\"}})]),_c('div',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.postData.user.nickname)+\" \"+_vm._s(_vm.postData.comment_length)+\"跟帖\")])]):_vm._e(),(_vm.postData.type == 2 && _vm.postData.cover.length >= 1)?_c('div',{staticClass:\"video\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.postData.title))]),_c('div',{staticClass:\"coverWrapper\"},[_c('img',{staticClass:\"coverImg\",attrs:{\"src\":_vm._f(\"fixUrl\")(_vm.postData.cover[0].url),\"alt\":\"\"}}),_vm._m(0)]),_c('div',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.postData.user.nickname)+\" \"+_vm._s(_vm.postData.comment_length)+\"跟帖\")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"playIconWrapper\"},[_c('span',{staticClass:\"iconfont icon-shiping\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div @click=\"jumpDetail\">\r\n    <!-- 如果postData的类型为1 并且 cover的长度大于1小于3 那么就是单图片显示 -->\r\n    <div\r\n      class=\"singleImg\"\r\n      v-if=\"postData.type == 1 && postData.cover.length >= 1 && postData.cover.length < 3\"\r\n    >\r\n      <div class=\"left\">\r\n        <div class=\"title\">{{postData.title}}</div>\r\n        <div class=\"info\">{{postData.user.nickname}} {{postData.comment_length}}跟帖</div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <img :src=\"postData.cover[0].url | fixUrl\" alt class=\"cover\" />\r\n      </div>\r\n    </div>\r\n    <!-- 如果postData的类型为1 并且 cover的长度大于3 那么就是多图片显示 -->\r\n    <div class=\"multipImgs\" v-if=\"postData.type == 1 && postData.cover.length >= 3\">\r\n      <div class=\"title\">{{postData.title}}</div>\r\n      <div class=\"coverWrapper\">\r\n        <img class=\"coverImg\" :src=\"postData.cover[0].url | fixUrl\" alt />\r\n        <img class=\"coverImg\" :src=\"postData.cover[1].url | fixUrl\" alt />\r\n        <img class=\"coverImg\" :src=\"postData.cover[2].url | fixUrl\" alt />\r\n      </div>\r\n      <div class=\"info\">{{postData.user.nickname}} {{postData.comment_length}}跟帖</div>\r\n    </div>\r\n    <!-- 如果postData的类型为2 并且 cover的长度大于1 那么就是视频显示 -->\r\n    <div class=\"video\" v-if=\"postData.type == 2 && postData.cover.length >= 1\">\r\n      <div class=\"title\">{{postData.title}}</div>\r\n      <div class=\"coverWrapper\">\r\n        <img class=\"coverImg\" :src=\"postData.cover[0].url | fixUrl\" alt />\r\n        <div class=\"playIconWrapper\">\r\n          <span class=\"iconfont icon-shiping\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"info\">{{postData.user.nickname}} {{postData.comment_length}}跟帖</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  filters: {\r\n    //  图片url过滤器\r\n    fixUrl(url) {\r\n      const reg = /^http/;\r\n      if (reg.test(url)) {\r\n        return url;\r\n      } else {\r\n        return \"http://127.0.0.1:3000\" + url;\r\n      }\r\n    },\r\n  },\r\n  props: [\"postData\"],\r\n  methods: {\r\n    jumpDetail() {\r\n      this.$router.push({\r\n        path: \"/postdetail?id=\" + this.postData.id,\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    // console.log(this.postData);\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.singleImg {\r\n  display: flex;\r\n  padding: 4.444vw 2.778vw;\r\n  border-bottom: 1px solid #e4e4e4;\r\n  align-items: center;\r\n  .left {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    height: 20.556vw;\r\n    .title {\r\n      font-size: 16px;\r\n    }\r\n    .info {\r\n      font-size: 14px;\r\n      color: #888;\r\n    }\r\n  }\r\n  .cover {\r\n    width: 33.333vw;\r\n    height: 20.556vw;\r\n    object-fit: cover;\r\n  }\r\n}\r\n.multipImgs {\r\n  padding: 4.444vw 2.778vw;\r\n  border-bottom: 1px solid #e4e4e4;\r\n  .title {\r\n    font-size: 4.444vw;\r\n  }\r\n  .info {\r\n    font-size: 3.889vw;\r\n    color: #888;\r\n  }\r\n  .coverWrapper {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 1.667vw 0 2.778vw;\r\n    .coverImg {\r\n      width: 33%;\r\n      height: 20.556vw;\r\n      object-fit: cover;\r\n    }\r\n  }\r\n}\r\n.video {\r\n  padding: 4.444vw 2.778vw;\r\n  border-bottom: 1px solid #e4e4e4;\r\n  .title {\r\n    font-size: 4.444vw;\r\n  }\r\n  .info {\r\n    font-size: 3.889vw;\r\n    color: #888;\r\n  }\r\n  .coverWrapper {\r\n    position: relative;\r\n    padding: 1.667vw 0 2.778vw;\r\n    .coverImg {\r\n      width: 100%;\r\n      height: 47.222vw;\r\n      object-fit: cover;\r\n    }\r\n    .playIconWrapper {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      .iconfont {\r\n        font-size: 46px;\r\n        color: #fff;\r\n        background: #ccc;\r\n        border-radius: 50%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostTemp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostTemp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostTemp.vue?vue&type=template&id=15ad1d18&scoped=true&\"\nimport script from \"./PostTemp.vue?vue&type=script&lang=js&\"\nexport * from \"./PostTemp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostTemp.vue?vue&type=style&index=0&id=15ad1d18&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15ad1d18\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('div',{staticClass:\"headerSec\"},[_c('div',{staticClass:\"topSec\"},[_vm._m(0),_c('div',{staticClass:\"secInfo\"},[_c('input',{staticClass:\"secInput\",attrs:{\"type\":\"text\",\"name\":\"secinfomation\"},domProps:{\"value\":_vm.secInputInfo},on:{\"focus\":_vm.goSecPage,\"blur\":_vm.getInfo}}),_c('i',{staticClass:\"iconfont icon-sousuo\"})]),_vm._m(1)]),_c('div',{staticClass:\"newList\"},[_c('div',{ref:\"newsListContent\",staticClass:\"items\"},[_c('van-tabs',{model:{value:(_vm.curIndex),callback:function ($$v) {_vm.curIndex=$$v},expression:\"curIndex\"}},_vm._l((_vm.categoryList),function(item,index){return _c('van-tab',{key:index,attrs:{\"title\":item.name,\"to\":'/?category='+index}},[_c('van-list',{attrs:{\"finished\":_vm.categoryList[index].finished,\"immediate-check\":false,\"finished-text\":\"没有更多了\",\"offset\":0},on:{\"load\":_vm.loadMorePost},model:{value:(_vm.categoryList[index].loading),callback:function ($$v) {_vm.$set(_vm.categoryList[index], \"loading\", $$v)},expression:\"categoryList[index].loading\"}},[_c('div',_vm._l((_vm.categoryList[index].postList),function(item,index2){return _c('post-temp',{key:index2,attrs:{\"postData\":item}})}),1)])],1)}),1)],1)])]),_c('div',{ref:\"createContent\",staticClass:\"newsContent\"})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"logo\"},[_c('i',{staticClass:\"iconfont icon-new\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"perInfo\"},[_c('a',{staticClass:\"iconfont icon-wode1\",attrs:{\"href\":\"#/perinfo\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <!-- 头部搜索栏 标签栏 -->\r\n    <div class=\"headerSec\">\r\n      <div class=\"topSec\">\r\n        <!-- logo -->\r\n        <div class=\"logo\">\r\n          <i class=\"iconfont icon-new\"></i>\r\n        </div>\r\n        <!-- 搜索框 -->\r\n        <div class=\"secInfo\">\r\n          <input\r\n            class=\"secInput\"\r\n            @focus=\"goSecPage\"\r\n            @blur=\"getInfo\"\r\n            :value=\"secInputInfo\"\r\n            type=\"text\"\r\n            name=\"secinfomation\"\r\n          />\r\n          <i class=\"iconfont icon-sousuo\"></i>\r\n        </div>\r\n        <!-- 我的信息 -->\r\n        <div class=\"perInfo\">\r\n          <a href=\"#/perinfo\" class=\"iconfont icon-wode1\"></a>\r\n        </div>\r\n      </div>\r\n      <!-- 资讯标签栏目 -->\r\n      <div class=\"newList\">\r\n        <div class=\"items\" ref=\"newsListContent\">\r\n          <van-tabs v-model=\"curIndex\">\r\n            <van-tab\r\n              v-for=\"(item,index) in categoryList\"\r\n              :title=\"item.name\"\r\n              :key=\"index\"\r\n              :to=\"'/?category='+index\"\r\n            >\r\n              <!-- List列表实现懒加载 -->\r\n              <van-list\r\n                v-model=\"categoryList[index].loading\"\r\n                :finished=\"categoryList[index].finished\"\r\n                :immediate-check=\"false\"\r\n                finished-text=\"没有更多了\"\r\n                @load=\"loadMorePost\"\r\n                :offset=\"0\"\r\n              >\r\n                <div>\r\n                  <!-- 新闻文章数据 -->\r\n                  <!-- 循环categoryList里面对应当前索引的所有文章 -->\r\n                  <post-temp\r\n                    :postData=\"item\"\r\n                    v-for=\"(item, index2) in categoryList[index].postList\"\r\n                    :key=\"index2\"\r\n                  ></post-temp>\r\n                </div>\r\n              </van-list>\r\n            </van-tab>\r\n          </van-tabs>\r\n        </div>\r\n        <!-- <div class=\"glide\">\r\n          <i class=\"iconfont icon-xiahua\"></i>\r\n        </div>-->\r\n      </div>\r\n    </div>\r\n    <!-- 新闻内容 -->\r\n\r\n    <div class=\"newsContent\" ref=\"createContent\"></div>\r\n    <!-- <transition\r\n      enter-active-class=\"animated bounceInRight\"\r\n      leave-active-class=\"animated bounceOutRight\"\r\n    >\r\n    <router-view name=\"PostDetailTemp\"></router-view>\r\n    </transition>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PostTemp from \"../components/PostTemp.vue\";\r\n// import PostDetail from \"./PostDetail.vue\"\r\nexport default {\r\n  data() {\r\n    return {\r\n      secInputInfo: \"搜索最新资讯\",\r\n      categoryList: [],\r\n      // curIndex会随着当前url的变化而变化，刚进入页面为0\r\n      curIndex: Number(this.$route.query.category) || 0,\r\n    };\r\n  },\r\n  methods: {\r\n    // 搜索框的方法\r\n    goSecPage() {\r\n      this.secInputInfo = \"\";\r\n      window.location.href = \"/#/secinfo\";\r\n    },\r\n    getInfo() {\r\n      this.secInputInfo = \"搜索最新资讯\";\r\n    },\r\n    //页面到底部触发的回调函数\r\n    loadMorePost() {\r\n      console.log(\r\n        \"页面已经到底部，加载更多,将当前栏目的pageIndex+1再调用loadPage加载新的数据\"\r\n      );\r\n\r\n      // 获取当前激活栏目，将其PageIndex+1\r\n      let category = this.getCurCategory();\r\n      category.pageIndex += 1;\r\n\r\n      // 加载新的数据，调用loadPage\r\n      setTimeout(() => {\r\n        this.loadPost();\r\n      }, 1000);\r\n    },\r\n    //加载新闻信息\r\n    loadPost() {\r\n      console.log(\"2---调用loadPost函数请求新闻文章数据\");\r\n\r\n      // 获取当前栏目所显示的文章类别category,调用getCurCategory函数\r\n      console.log(\r\n        \"2.1------获取当前的栏目category，通过category.id可以获取当前激活栏目的id\"\r\n      );\r\n      let category = this.getCurCategory();\r\n      let categoryId = category.id;\r\n      console.log(\"当前激活栏目的id：\" + categoryId);\r\n      console.log(\"当前栏目的当前页：\"+category.pageIndex);\r\n      console.log(\"当前栏目显示的文章数：\"+category.pageSize);\r\n      this.$axios({\r\n        url: \"/post\",\r\n        method: \"get\",\r\n        params: {\r\n          category: categoryId,\r\n          pageIndex: category.pageIndex,\r\n          pageSize: category.pageSize,\r\n        },\r\n      }).then((res) => {\r\n        console.log('文章数据——————————————————————————————');\r\n        console.log(res.data);\r\n        console.log(\r\n          \"2.2---------将category中的postList数组解构，以及获取的文章数据解构到数组重新赋值给category.postList\"\r\n        );\r\n        category.postList = [...category.postList, ...res.data.data];\r\n        console.log(\r\n          \"2.3---------将category中的loading状态改为false，表示加载完毕\"\r\n        );\r\n        category.loading = false;\r\n\r\n        // 判断当前栏目文章的数据总长度是否小于category.pageSize即每页显示的文章数，如果小于则表示加载完毕\r\n        console.log(\"2.4---------判断当前栏目的数据是否全部加载完毕\");\r\n        console.log(category.postList.length);\r\n        if (res.data.total <= category.postList.length ||!res.data.total) {\r\n          category.finished = true;\r\n          console.log(\"2.4.1---------数据已经加载完毕\");\r\n        } else {\r\n          console.log(\"2.4.1---------可以继续加载\");\r\n        }\r\n        console.log(\r\n          \"loadPage 渲染完成！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！\"\r\n        );\r\n      });\r\n    },\r\n    // 加载首页栏目\r\n    loadCategory() {\r\n      // 先看本地有没有数据，没有再去请求接口\r\n      if (localStorage.getItem(\"categoryList\")&&localStorage.getItem(\"delCategoryList\")) {\r\n        this.categoryList = this.initCategory(\r\n          JSON.parse(localStorage.getItem(\"categoryList\"))\r\n        );\r\n        console.log(this.categoryList);\r\n        //发送loadPost请求文章数据\r\n        this.loadPost();\r\n      } else {\r\n       \r\n        this.$axios({\r\n          url: \"/category\",\r\n          method: \"get\",\r\n        }).then((res) => {\r\n          console.log(res.data.data);\r\n          // 将栏目数据存入到本地\r\n          localStorage.setItem(\"categoryList\", JSON.stringify(res.data.data));\r\n          // 改造栏目数据，调用initCategory\r\n          console.log(\"1.1------调用initCategory改造栏目数据\");\r\n          this.categoryList = this.initCategory(res.data.data);\r\n          //发送loadPost请求文章数据\r\n          this.loadPost();\r\n        });\r\n      }\r\n    },\r\n    // 获取category激活栏目的id\r\n    getCurCategory() {\r\n      console.log(\r\n        \"------------------------进入getCurCategory获取当前激活栏目------------------------\"\r\n      );\r\n      let index = this.curIndex;\r\n      // 利用当前激活栏目的索引，获取当前的激活栏目\r\n      let category = this.categoryList[index];\r\n      console.log('当前激活的栏目：');\r\n      console.log(category);\r\n      if (category) {\r\n        return category;\r\n      } else {\r\n        return this.categoryList[0];\r\n      }\r\n    },\r\n    // 改造栏目数据函数initCategory\r\n    initCategory(res) {\r\n      console.log(\r\n        \"1.2---------在每个栏目中添加管理自己的文章数组postList，pageIndex当前页，pageSize页面长度，加载状态\"\r\n      );\r\n      const oldCategoryData = res;\r\n      // console.log(\"改造之前的栏目老数据：oldCategoryData\");\r\n      // console.log(oldCategoryData);\r\n      const categoryList = res.map((item) => {\r\n        let newArr = {\r\n          // 将所有的栏目数据用扩展运算符将每一项，都扩展到newArr中\r\n          ...item,\r\n          pageIndex: 1,\r\n          pageSize: 5,\r\n          postList: [],\r\n          // 栏目的当前状态 是否正在加载loading  是否加载完成finished\r\n          loading: true,\r\n          finished: false,\r\n        };\r\n        return newArr;\r\n      });\r\n      // console.log(\"改造后的栏目数据:categoryList\");\r\n      // console.log(categoryList);\r\n      console.log(\"1.3---------最后将改造后的栏目数据返回给this.categoryList\");\r\n      return categoryList;\r\n    },\r\n  },\r\n  components: {\r\n    PostTemp,\r\n    // PostDetail\r\n  },\r\n  watch: {\r\n    // 4.监听tab标签栏的变化 每次变化都会传过来一个索引值\r\n    curIndex: function (index) {\r\n      localStorage.setItem(\"curCategoryIndex\", this.$route.query.category);\r\n      console.log(\r\n        \"-----------------执行监听器的curIndex方法--------------当前栏目的索引值是\" +\r\n          index\r\n      );\r\n      // 获取当前激活栏目信息\r\n      const category = this.getCurCategory();\r\n\r\n      // 如果当前激活栏目的postList 的长度为0，就需要渲染页面才执行loadPost，否则不需要刷新页面了\r\n      if (category.postList.length == 0) {\r\n        console.log(\"当前激活栏目的postlist长度为0，因此执行loadPost渲染数据\");\r\n        this.loadPost();\r\n      } else {\r\n        console.log(\"当前激活栏目的postList数据不为0，无需重新渲染页面\");\r\n        console.log(this.categoryList[index].postList);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // 进入页面首先请求栏目数据\r\n    console.log(\"1---进入页面首先请求栏目数据\");\r\n    this.loadCategory();\r\n\r\n    // 操作Dom\r\n    let itemElem = this.$refs.newsListContent.getElementsByClassName(\r\n      \"van-tabs__content\"\r\n    )[0];\r\n    let currCon = this.$refs.createContent;\r\n    currCon.appendChild(itemElem);\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.home {\r\n  .newList {\r\n    .van-tabs {\r\n      height: 100%;\r\n    }\r\n    .van-tabs__line {\r\n      background-color: #248cec;\r\n    }\r\n    .van-tabs__wrap,\r\n    .van-tabs__nav {\r\n      background: rgb(246, 246, 246);\r\n      height: 100%;\r\n    }\r\n  }\r\n  .van-image {\r\n    img {\r\n      width: 110/360 * 100vw;\r\n      height: 75/360 * 100vw;\r\n    }\r\n  }\r\n}\r\n/* 编辑页面上传图片样式 */\r\n\r\n.van-uploader__wrapper {\r\n  width: 100%;\r\n  height: 100%;\r\n  .van-uploader__upload {\r\n    margin: 0;\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\" scoped>\r\n.home {\r\n  width: 100vw;\r\n  // overflow: hidden;\r\n  .headerSec {\r\n    position: fixed;\r\n    top: 0;\r\n    z-index: 100;\r\n    width: 100vw;\r\n    .topSec {\r\n      height: 50/360 * 100vw;\r\n      display: flex;\r\n      background: rgb(63, 152, 236);\r\n      > div {\r\n        color: #fff;\r\n        text-align: center;\r\n        line-height: 50/360 * 100vw;\r\n        justify-content: space-between;\r\n        .icon-new {\r\n          font-size: 50/360 * 100vw;\r\n        }\r\n        .icon-wode1 {\r\n          color: #fff;\r\n          font-size: 24/360 * 100vw;\r\n        }\r\n      }\r\n      .logo {\r\n        flex: 2;\r\n      }\r\n      .secInfo {\r\n        position: relative;\r\n        flex: 6;\r\n        .icon-sousuo {\r\n          position: absolute;\r\n          left: 8/360 * 100vw;\r\n          font-size: 18/360 * 100vw;\r\n          line-height: 49/360 * 100vw;\r\n        }\r\n        .secInput {\r\n          width: 210/360 * 100vw;\r\n          height: 35/360 * 100vw;\r\n          font-size: 14/360 * 100vw;\r\n          // text-indent: 30/360*100vw;\r\n          text-align: center;\r\n          border-radius: 17/360 * 100vw;\r\n          background: rgba(230, 228, 228, 0.527);\r\n        }\r\n      }\r\n      .perInfo {\r\n        flex: 2;\r\n      }\r\n    }\r\n    .newList {\r\n      position: relative;\r\n      height: 40/360 * 100vw;\r\n      background: rgb(246, 246, 246);\r\n      display: flex;\r\n      .items {\r\n        flex: 7;\r\n        width: 100vw;\r\n      }\r\n      .glide {\r\n        position: absolute;\r\n        right: 0;\r\n        top: 0;\r\n        z-index: 100;\r\n        background: rgb(230, 228, 228);\r\n        width: 37/360 * 100vw;\r\n        height: 100%;\r\n        text-align: center;\r\n        .iconfont {\r\n          line-height: 40/360 * 100vw;\r\n          font-size: 30/360 * 100vw;\r\n          color: rgb(139, 139, 139);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /* 新闻内容样式 */\r\n  .newsContent {\r\n    margin-top: 90/360 * 100vw;\r\n\r\n    &:last-child {\r\n      margin-bottom: 10px;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=68544152&scoped=true&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=less&\"\nimport style1 from \"./Home.vue?vue&type=style&index=1&id=68544152&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68544152\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=less&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=1&id=68544152&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=1&id=68544152&lang=less&scoped=true&\""],"sourceRoot":""}