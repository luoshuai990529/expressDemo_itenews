(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ee0c840"],{"13ab":function(t,e,a){},2265:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"peritems",on:{click:t.sendClick}},[a("a",{staticClass:"msg_1",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.msg1))]),a("a",{staticClass:"msg_2",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v(" "+t._s(t.msg2)+" "),a("i",{staticClass:"iconfont icon-youjiantou"})])])},i=[],s={props:["msg1","msg2"],data(){return{}},methods:{sendClick(){this.$emit("emitclick")}}},o=s,c=(a("2a52"),a("2877")),r=Object(c["a"])(o,n,i,!1,null,"05c5e31e",null);e["a"]=r.exports},"2a52":function(t,e,a){"use strict";var n=a("bdff"),i=a.n(n);i.a},"8a40":function(t,e,a){"use strict";var n=a("13ab"),i=a.n(n);i.a},"92dd":function(t,e,a){t.exports=a.p+"img/d1.82ae637b.jpg"},bdff:function(t,e,a){},caf1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pernav"},[a("div",{staticClass:"edithead"},[a("i",{staticClass:"iconfont icon-fanhui",on:{click:t.sendClick}}),a("b",[t._v(t._s(t.navtitle))])])])},i=[],s={props:["navtitle"],data(){return{}},methods:{sendClick(){this.$emit("clickNav")}}},o=s,c=(a("8a40"),a("2877")),r=Object(c["a"])(o,n,i,!1,null,"664cd19b",null);e["a"]=r.exports},e6831:function(t,e,a){"use strict";var n=a("f508"),i=a.n(n);i.a},eb0d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editInfo"},[n("per-nav-temp",{attrs:{navtitle:"编辑资料"},on:{clickNav:function(e){return t.backHandler("返回个人中心")}}}),n("div",{staticClass:"infocontent"},[n("div",{staticClass:"headimg",on:{click:function(e){return t.handler("编辑头像")}}},[n("div",{staticClass:"uploaderWrapper"},[n("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":1}})],1),t.headimg?n("img",{attrs:{src:t._f("fixUrl")(t.headimg),alt:""}}):n("img",{attrs:{src:a("92dd"),alt:""}})]),t._m(0),n("peropt-temp",{attrs:{msg1:"昵称",msg2:this.nickname},on:{emitclick:function(e){return t.handler("nickname")}}}),n("peropt-temp",{attrs:{msg1:"密码",msg2:"******"},on:{emitclick:function(e){return t.handler("password")}}}),n("peropt-temp",{attrs:{msg1:"性别",msg2:1==this.gender?"男":"女"},on:{emitclick:function(e){return t.handler("gender")}}}),n("button",{staticClass:"isChange",on:{click:t.editInfo}},[t._v("保存修改")])],1),n("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:t.confirmNickname},model:{value:t.showNicname,callback:function(e){t.showNicname=e},expression:"showNicname"}},[n("van-field",{attrs:{label:"昵称","error-message":"昵称不允许超过6位"},model:{value:t.editnickname,callback:function(e){t.editnickname=e},expression:"editnickname"}})],1),n("van-dialog",{attrs:{title:"修改密码","show-cancel-button":""},on:{confirm:t.confirmPwd},model:{value:t.showPwd,callback:function(e){t.showPwd=e},expression:"showPwd"}},[n("van-field",{attrs:{type:"password",label:"密码","error-message":"密码需要6位以上"},model:{value:t.editpwd,callback:function(e){t.editpwd=e},expression:"editpwd"}})],1),n("van-dialog",{attrs:{title:"修改性别","show-cancel-button":""},on:{confirm:t.confirmGender},model:{value:t.showGender,callback:function(e){t.showGender=e},expression:"showGender"}},[n("van-radio-group",{model:{value:t.editgender,callback:function(e){t.editgender=e},expression:"editgender"}},[n("van-cell-group",[n("van-cell",{attrs:{title:"女",clickable:""},on:{click:function(e){t.radio="0"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:"0"}})]},proxy:!0}])}),n("van-cell",{attrs:{title:"男",clickable:""},on:{click:function(e){t.radio="1"}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:"1"}})]},proxy:!0}])})],1)],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"infotitle"},[a("span",[t._v("点击头像进行编辑")])])}],s=a("2265"),o=a("caf1"),c={filters:{fixUrl(t){const e=/^http/;return e.test(t)?t:"http://itluoshuai.cn:3000"+t}},data(){return{nickname:"",gender:"",password:"",headimg:"",editnickname:"",editgender:"",editpwd:"",showGender:!1,showNicname:!1,showPwd:!1}},methods:{loadPage(){this.$axios({url:"/user/"+localStorage.getItem("userId"),method:"get"}).then(t=>{this.nickname=t.data.data.nickname,this.gender=t.data.data.gender+"",this.password=t.data.data.password,this.editgender=t.data.data.gender+"",this.headimg=t.data.data.head_img})},handler(t){"nickname"==t?this.showNicname=!0:"password"==t?this.showPwd=!0:"gender"==t&&(this.showGender=!0)},confirmNickname(){console.log("确认修改昵称"+this.editnickname),this.editnickname&&/^.{1,6}$/.test(this.editnickname)?this.nickname=this.editnickname:(this.$toast.fail("请输入符合规则的值!"),this.editnickname="")},confirmPwd(){console.log("确认修改密码"+this.editpwd),this.editpwd&&/^.{6,}$/.test(this.editpwd)?this.password=this.editpwd:(this.$toast.fail("请输入符合规则的值!"),this.editpwd="")},confirmGender(){console.log("确认修改性别"+this.editgender),this.gender=this.editgender+""},afterRead(t){const e=new FormData;e.append("file",t.file),this.$axios({url:"/upload",method:"post",data:e}).then(t=>{console.log(t),"文件上传成功"==t.data.message?(this.$toast.success(t.data.message),this.headimg=t.data.data.url):this.$toast.fail(t.message)})},backHandler(t){console.log(t),this.$router.push("/perinfo")},editInfo(){console.log("保存修改");let t=this.password,e=this.nickname,a=this.headimg,n=this.gender;console.log(a),console.log(t),console.log(n),this.$axios({url:"/user_update/"+localStorage.getItem("userId"),method:"post",data:{password:t,nickname:e,head_img:a,gender:n}}).then(t=>{"修改成功"==t.data.message?(this.$toast.success("修改成功"),this.$router.push("/perinfo")):this.$toast.fail(t.data.message)}).catch(t=>{console.log(t)})}},components:{PeroptTemp:s["a"],PerNavTemp:o["a"]},mounted(){this.loadPage()}},r=c,d=(a("e6831"),a("2877")),l=Object(d["a"])(r,n,i,!1,null,"055d0174",null);e["default"]=l.exports},f508:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5ee0c840.dca6101f.js.map