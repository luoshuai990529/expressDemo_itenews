(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2ebddd0","chunk-49d973e0"],{"0e07":function(t,s,e){},"13ab":function(t,s,e){},"246d":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"postdetail",on:{click:t.handler}},[e("div",{staticClass:"detail-header"},[e("div",{staticClass:"left"},[e("i",{staticClass:"iconfont icon-zuojiantou",on:{click:function(s){return t.$router.back()}}}),e("i",{staticClass:"iconfont icon-new",on:{click:function(s){return t.$router.back()}}})]),e("div",{staticClass:"right"},[e("span",{class:t.isAttention?"isActive":"",domProps:{textContent:t._s(t.isAttention?"取消关注":"关注")},on:{click:t.AttentionTo}})])]),1==t.type||-1!=t.content.indexOf("content")?e("div",{staticClass:"normalPost"},[e("h3",{staticClass:"title"},[t._v(t._s(t.title))]),e("p",{staticClass:"pmsg"},[e("span",{staticClass:"postfrom"},[t._v(t._s(t.nickname))]),e("span",{staticClass:"time"},[t._v(t._s(t.create_date.split("T")[0]))])]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}})]):t._e(),2==t.type&&-1==t.content.indexOf("content")?e("div",{staticClass:"videoPost"},[e("div",{staticClass:"videoCon"},[e("video",{attrs:{src:t._f("filtContent")(t.content),controls:"true",muted:"muted"},domProps:{muted:!0}})]),e("div",{staticClass:"articlefrom"},[e("div",{staticClass:"userMsg"},[e("span",{staticClass:"headImg"},[e("img",{attrs:{src:t.$axios.defaults.baseURL+t.head_img,alt:""}})]),e("span",{staticClass:"text"},[t._v(t._s(t.nickname))])])]),e("h3",{staticClass:"title"},[t._v(t._s(t.title))])]):t._e(),e("div",{staticClass:"detailBot"},[e("div",{staticClass:"left"},[e("span",{staticClass:"dianzan",class:t.isDianzan?"active":"",on:{click:t.ckLike}},[e("i",{staticClass:"iconfont icon-dianzan"}),e("i",{staticClass:"number",staticStyle:{"margin-left":"6px"}},[t._v(t._s(t.like_length))])])]),t._m(0)]),e("div",{staticClass:"followUp"},[e("h3",[t._v("精彩跟帖")]),e("div",{staticClass:"followList"},t._l(t.commentList,(function(s,a){return e("div",{key:a},[a<3?e("comments",{attrs:{comment:s},on:{clickReply:t.discuss}}):t._e()],1)})),0),e("p",{staticClass:"more"},[e("a",{attrs:{href:"#"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.moreComments(s)}}},[t._v("更多跟帖")])]),e("commentInput",{attrs:{tienum:t.commentsTotal,isStar:t.isStar,showInput:t.showInput,repParentId:t.repParentId,repname:t.repname},on:{discuss:t.discuss,collection:t.collection,share:t.share,sendContent:t.loadComments}})],1)])},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"right"},[e("span",{staticClass:"weixin"},[e("i",{staticClass:"iconfont icon-weixin"}),e("i",{staticClass:"text"},[t._v("微信")])])])}],i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"writeinp",class:t.showInput?"showTextArea":"",on:{click:function(s){return s.stopPropagation(),t.handler(s)}}},[t.showInput?t._e():e("div",{staticClass:"inpCon"},[e("input",{attrs:{type:"text",placeholder:"写跟帖"},on:{focus:t.discussEmit}}),e("i",{staticClass:"iconfont icon-pinglun",on:{click:function(s){return s.stopPropagation(),t.discussEmit(s)}}},[e("span",{staticClass:"tienum"},[t._v(t._s(t.tienum))])]),e("i",{staticClass:"iconfont isStar",class:t.isStar?"active":"",domProps:{textContent:t._s(t.isStar?"★":"☆")},on:{click:function(s){return s.stopPropagation(),t.collectionEmit(s)}}}),e("i",{staticClass:"iconfont  icon-share_icon",on:{click:function(s){return s.stopPropagation(),t.shareEmit(s)}}})]),t.showInput?e("div",{staticClass:"textareaInput"},[e("textarea",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"writeCon",attrs:{name:"",id:""},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}}),e("button",{staticClass:"sendBtn",on:{click:function(s){return s.stopPropagation(),t.sendDiscuss(s)}}},[t._v("发送")]),!t.content&&t.repname?e("div",{staticClass:"repwho"},[t._v("回复:@"+t._s(t.repname))]):t._e()]):t._e()])},o=[],c={directives:{focus:{inserted:function(t){t.focus()}}},data(){return{content:""}},props:["isStar","tienum","showInput","repParentId","repname"],computed:{},methods:{discussEmit(){this.$emit("discuss")},collectionEmit(){this.$emit("collection")},shareEmit(){this.$emit("share")},sendDiscuss(){""!=this.content.trim()?(console.log("发送信息"),this.$axios({url:"/post_comment/"+this.$route.query.id,method:"post",data:{content:this.content,parent_id:this.repParentId||null}}).then(t=>{console.log(t),this.$toast.success(t.data.message),this.content="",this.$emit("sendContent")})):this.$toast("请不要输入空值")},handler(){this.$emit("sendClickArea")}},mounted(){}},l=c,r=(e("41b0"),e("2877")),d=Object(r["a"])(l,i,o,!1,null,"0339d42c",null),u=d.exports,m=e("efb3"),h=e("58a6"),p={filters:{filtContent:function(t){let s=t.match(/src=[\'\"]?([^\'\"]*)[\'\"]?/i);return s=s[0].match(/(?<=").*?(?=")/g),s[0]}},data(){return{type:1,title:"",create_date:"",content:"",nickname:"",postImg:"",head_img:"",userId:"",isAttention:!1,AticelId:"",like_length:"",isDianzan:!1,commentList:[],repParentId:"",commentsTotal:0,isStar:!1,showInput:!1,repname:""}},methods:{AttentionTo(){this.isAttention?(console.log("取消关注"+this.userId),this.$axios({url:"/user_unfollow/"+this.userId,method:"get"}).then(t=>{console.log(t),(t.message="取消关注成功")&&this.$toast.success("取消关注成功")})):(console.log("关注用户"+this.userId),this.$axios({url:"/user_follows/"+this.userId,method:"get"}).then(t=>{console.log(t),"关注成功"==t.data.message&&this.$toast.success(t.data.message)})),this.isAttention=!this.isAttention},discuss(t,s){console.log("回复文章的id为"+t),console.log("回复的用户name为："+s),this.repParentId=t,this.showInput=!0,this.repname=s},collection(){this.$axios({url:"/post_star/"+this.AticelId,method:"GET"}).then(t=>{console.log(t),this.isStar=!this.isStar,this.$toast.success(t.data.message)})},share(){console.log("分享"),this.$toast.fail("该网站目前禁止分享")},ckLike(){this.$axios({url:"/post_like/"+this.AticelId,method:"GET"}).then(t=>{console.log(t),this.isDianzan=!this.isDianzan,this.$toast.success(t.data.message),"点赞成功"==t.data.message?this.like_length+=1:this.like_length-=1})},loadDetail(){this.$axios({url:"/post/"+this.$route.query.id,method:"get"}).then(t=>{console.log(t.data.data),this.type=t.data.data.type,this.title=t.data.data.title,this.create_date=t.data.data.create_date,this.content=t.data.data.content,this.nickname=t.data.data.user.nickname,this.postImg=t.data.data.cover[0].url,this.head_img=t.data.data.user.head_img,this.userId=t.data.data.user.id,this.AticelId=t.data.data.id,this.isStar=t.data.data.has_star,this.like_length=t.data.data.like_length,this.isDianzan=t.data.data.has_like;let s=t.data.data.user;this.$axios({url:"/user_follows",method:"get"}).then(t=>{t.data.data.forEach(t=>{t.id==s.id&&(this.isAttention=!0)})})})},handler(){console.log("点击了文章详情组件,隐藏文本域输入框"),this.showInput=!1},loadComments(){this.$axios({url:"/post_comment/"+this.$route.query.id,method:"get"}).then(t=>{this.commentList=t.data.data,this.commentsTotal=t.data.data.length,this.showInput=!1})},moreComments(){this.$router.push({path:"/morecomments",query:{articleId:this.$route.query.id}})}},mounted(){this.loadDetail(),this.loadComments()},components:{CommentInput:u,Comments:m["a"],MoreComments:h["default"]}},f=p,v=(e("d627"),Object(r["a"])(f,a,n,!1,null,"6aed4a6a",null));s["default"]=v.exports},"41b0":function(t,s,e){"use strict";var a=e("7e0d"),n=e.n(a);n.a},"58a6":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.commentList?e("div",{staticClass:"moreComments",on:{click:function(s){s.stopPropagation(),t.showInput=!1}}},[e("div",{staticClass:"header"},[e("per-nav-temp",{attrs:{navtitle:"精彩跟帖"},on:{clickNav:function(s){return t.backHandler("返回文章详情页")}}})],1),e("div",{staticClass:"followList"},[t._l(t.commentList,(function(s,a){return e("div",{key:a},[e("comments",{attrs:{comment:s},on:{clickReply:t.discuss}})],1)})),t._m(0)],2),e("div",{staticClass:"sendComments",on:{click:function(s){s.stopPropagation(),t.showInput=!0}}},[e("div",{staticClass:"writeinp"},[t.showInput?t._e():e("div",{staticClass:"inpCon"},[e("input",{attrs:{type:"text",placeholder:"写跟帖"},on:{focus:function(s){s.stopPropagation(),t.showInput=!0}}})]),t.showInput?e("div",{staticClass:"textareaInput",class:t.showInput?"showTextArea":""},[e("textarea",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"writeCon",attrs:{name:"",id:""},domProps:{value:t.content},on:{input:function(s){s.target.composing||(t.content=s.target.value)}}})]):t._e(),e("button",{staticClass:"sendBtn",on:{click:t.sendComments}},[t._v("发送")])])])]):t._e()},n=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"botMsg"},[e("h4",[t._v("已经加载完毕啦")])])}],i=e("caf1"),o=e("efb3"),c={directives:{focus:{inserted:function(t){t.focus()}}},data(){return{showInput:!1,content:"",commentList:[],repParentId:""}},components:{PerNavTemp:i["a"],Comments:o["a"]},methods:{backHandler(){this.$router.back()},discuss(t){console.log("回复文章的id为"+t),this.repParentId=t,this.showInput=!0},changeInput(){this.showInput=!0},sendComments(){""!=this.content.trim()?(console.log("发送信息"),this.$axios({url:"/post_comment/"+this.$route.query.articleId,method:"post",data:{content:this.content,parent_id:this.repParentId||null}}).then(t=>{console.log(t),this.$toast.success(t.data.message),this.content="",this.loadComments()})):this.$toast("请不要输入空值")},loadComments(){this.$axios({url:"/post_comment/"+this.$route.query.articleId,method:"get"}).then(t=>{console.log(t.data.data),this.commentList=t.data.data})}},mounted(){this.loadComments()}},l=c,r=(e("91d6"),e("2877")),d=Object(r["a"])(l,a,n,!1,null,"0bd07904",null);s["default"]=d.exports},"7e0d":function(t,s,e){},"851c":function(t,s,e){"use strict";var a=e("bc21"),n=e.n(a);n.a},"8a40":function(t,s,e){"use strict";var a=e("13ab"),n=e.n(a);n.a},"91d6":function(t,s,e){"use strict";var a=e("c5c2"),n=e.n(a);n.a},b845:function(t,s,e){},bc21:function(t,s,e){},c5c2:function(t,s,e){},caf1:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"pernav"},[e("div",{staticClass:"edithead"},[e("i",{staticClass:"iconfont icon-fanhui",on:{click:t.sendClick}}),e("b",[t._v(t._s(t.navtitle))])])])},n=[],i={props:["navtitle"],data(){return{}},methods:{sendClick(){this.$emit("clickNav")}}},o=i,c=(e("8a40"),e("2877")),l=Object(c["a"])(o,a,n,!1,null,"664cd19b",null);s["a"]=l.exports},cc5b:function(t,s,e){"use strict";var a=e("0e07"),n=e.n(a);n.a},d627:function(t,s,e){"use strict";var a=e("b845"),n=e.n(a);n.a},efb3:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"comments"},[e("div",{staticClass:"comUser"},[e("div",{staticClass:"headImg"},[e("img",{attrs:{src:t.$axios.defaults.baseURL+t.comment.user.head_img,alt:""}})]),e("div",{staticClass:"comMsg"},[e("span",{staticClass:"nickname"},[t._v(t._s(t.comment.user.nickname))]),e("span",{staticClass:"comTime"},[t._v(t._s(t.beforTime))])]),e("div",{staticClass:"reply"},[e("a",{attrs:{href:"#","data-id":t.comment.id},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.sendReply(t.comment.id,t.comment.user.nickname)}}},[t._v("回复")])])]),t.comment.parent?e("div",{staticClass:"floor"},[e("parent",{attrs:{floorList:t.comment.parent,level:t.FloorLevel},on:{clickReply:t.sendReply}})],1):t._e(),e("div",{staticClass:"content"},[t._v(t._s(t.comment.content))])])},n=[],i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"parentContent"},[t.floorList.parent?e("parent",{attrs:{level:t.level-1,floorList:t.floorList.parent},on:{clickReply:t.sendReply}}):t._e(),e("div",{staticClass:"comInfo"},[e("div",{staticClass:"userCom"},[e("span",{staticClass:"floor"},[t._v("第 "+t._s(t.level)+" 楼")]),e("span",{staticClass:"nickname"},[t._v(t._s(t.floorList.user.nickname))]),e("span",{staticClass:"time"},[t._v(t._s(t.beforTime))]),e("span",{staticClass:"reply"},[e("a",{attrs:{href:"#","data-id":t.floorList.id},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.sendReply(t.floorList.id,t.floorList.user.nickname)}}},[t._v("回复")])])]),e("div",{staticClass:"comments"},[t._v(t._s(t.floorList.content))])])],1)},o=[],c={name:"Parent",props:["floorList","level"],data(){return{}},mounted(){},computed:{beforTime(){let t=new Date(this.floorList.create_date).toLocaleDateString().split("/"),s=(new Date).toLocaleDateString().split("/");if(s[0]-t[0]!=0)return s[0]-t[0]+"年前";if(s[1]-t[1]!=0)return s[1]-t[1]+"月前";if(s[2]-t[2]!=0)return s[2]-t[2]+"天前";let e=new Date(this.floorList.create_date).toLocaleTimeString().split(":")[0].split("午")[1],a=(new Date).toLocaleTimeString().split(":")[0].split("午")[1],n=a-e==0?"1小时内":a-e+"小时前";return n}},methods:{sendReply(t,s){this.$emit("clickReply",t,s)}}},l=c,r=(e("851c"),e("2877")),d=Object(r["a"])(l,i,o,!1,null,"0a540199",null),u=d.exports,m={props:["comment"],data(){return{}},computed:{beforTime(){let t=new Date(this.comment.create_date).toLocaleDateString().split("/"),s=(new Date).toLocaleDateString().split("/");if(s[0]-t[0]!=0)return s[0]-t[0]+"年前";if(s[1]-t[1]!=0)return s[1]-t[1]+"月前";if(s[2]-t[2]!=0)return s[2]-t[2]+"天前";let e=new Date(this.comment.create_date).toLocaleTimeString().split(":")[0].split("午")[1],a=(new Date).toLocaleTimeString().split(":")[0].split("午")[1],n=a-e==0?"1小时内":a-e+"小时前";return n},FloorLevel(){return this.calcuFloorDeep(this.comment.parent,0)}},methods:{sendReply(t,s){this.$emit("clickReply",t,s)},calcuFloorDeep(t,s){return t?this.calcuFloorDeep(t.parent,s+1):s}},components:{Parent:u},mounted(){console.log(this.comment)}},h=m,p=(e("cc5b"),Object(r["a"])(h,a,n,!1,null,"4e0a4b62",null));s["a"]=p.exports}}]);
//# sourceMappingURL=chunk-a2ebddd0.270d9c89.js.map